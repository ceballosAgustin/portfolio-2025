---
import SocialIcons from '../components/SocialIcons.astro';
import '../styles/notifications.css';
---

<section id="contacto" aria-label="Formulario de contacto" 
    class="min-h-screen flex flex-col items-center p-8 pt-24">
    <h2 class="text-4xl font-bold text-center mb-12">Contacto</h2>
    <form id="contacto-form" 
    method="POST"
    class="w-full max-w-md bg-gray-900/50 p-8 rounded-xl 
    border border-light-pink/20 hover:border-light-lavanda/40 transition-all"
    aria-labelledby="contacto-heading"
    @submit.prevent="handleSubmit">
        <div class="mb-6">
            <label for="name" class="block text-base mb-2">Nombre</label>
            <div class="relative">
                <input type="text" 
                        id="name" 
                        name="name" 
                        placeholder="Tu nombre" 
                        class="w-full p-3 pl-10 bg-gray-800 text-silver-metallic rounded-lg border border-light-pink/20 focus:border-light-lavanda focus:outline-none" 
                        required
                        minlength="2"
                        maxlength="50"
                        title="Solo se permiten letras y espacios.">
                <svg class="absolute left-3 top-3.5 size-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            </div>
        </div>
        <div class="mb-6">
            <label for="email" class="block text-base mb-2">Email</label>
            <div class="relative">
                <input type="email" 
                        id="email" 
                        name="email" 
                        placeholder="tucorreo@ejemplo.com" 
                        class="w-full p-3 pl-10 bg-gray-800 text-silver-metallic rounded-lg border border-light-pink/20 focus:border-light-lavanda focus:outline-none" 
                        required>
                <svg class="absolute left-3 top-3.5 size-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
            </div>
        </div>
        <div class="mb-6">
            <label for="message" class="block text-base mb-2">Mensaje</label>
            <textarea id="message" 
                        name="message" 
                        placeholder="Escríbeme tu mensaje aquí..." 
                        class="w-full p-3 bg-gray-800 text-silver-metallic rounded-lg border border-light-pink/20 focus:border-light-lavanda focus:outline-none
                        resize-none" 
                        rows="7"
                        required
                        minlength="10"
                        maxlength="500"></textarea>
        </div>
        <button type="submit" 
                class="w-full px-8 py-3 mt-4 text-xl bg-light-pink/10 border-2 border-light-pink/30 text-white rounded-lg 
                hover:scale-105 hover:bg-light-violet/20
                hover:border-light-violet
                transition-all duration-300"
                aria-live="polite">
            Enviar Mensaje
        </button>
    </form>
    <SocialIcons class="mt-12" />
</section>

<script type="module">
    import { setupFormHandler } from '/src/scripts/formHandler';
    import { setupFormValidation } from '/src/scripts/formValidation';

    document.addEventListener('DOMContentLoaded', () => {
        setupFormValidation();
        setupFormHandler();
    });
</script>